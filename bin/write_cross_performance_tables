#!/usr/bin/python
#
# Write a cross performance table in JSON format.
#
import argparse
import pick_codec
import sys
import visual_metrics


def main():
  parser = argparse.ArgumentParser()
  parser.add_argument('codecs', nargs='*',
                      default=pick_codec.codec_map.keys())
  args = parser.parse_args()
  datatable = {}
  visual_metrics.ListMpegResults(args.codecs, False, datatable)
  matrix = visual_metrics.CrossPerformanceGvizTable(datatable,
                                                    'avg', args.codecs)
  print matrix.ToJSon(columns_order=['codec'] + args.codecs)

if __name__ == '__main__':
  sys.exit(main())
